<p-sidebar [(visible)]="visible" position="right" [transitionOptions]="'.3s cubic-bezier(0, 0, 0.2, 1)'" [style]="{'width': '500px', 'overflow-y': 'hidden'}" styleClass="modern-sidebar">
    <div class="profile-sidebar h-full">
        <!-- Información del perfil -->
        <div class="flex flex-row align-items-center p-3 animate-fade-in">     
           <div class="avatar-container hover-effect">
            <p-avatar [label]="!img || img.length === 0 ? label : ''"
                      [image]="img && img.length > 0 ? img : null"
                      size="xlarge"
                      shape="circle"
                      [style]="{'width': '90px', 'height': '90px', 'transition': 'all 0.3s ease'}"
                      styleClass="cursor-pointer shadow-4">
            </p-avatar>
            <div class="avatar-overlay">
                <i class="pi pi-camera"></i>
            </div>
        </div>
        <div class="user-status mt-2 gap-2">
            <span class="text-xl font-semibold">{{nombreUsr}}</span><br>
            <span class="text-sm font-semibold">{{nombreEmp}}</span><br>   
            <span class="text-sm font-semibold">{{empresa}}</span><br>   
            <i class="pi pi-circle-fill text-green-500" style="font-size: 0.5rem ; margin-right: 0.5rem"></i>
            <span class="text-sm">En línea</span>
        </div>      
        </div>
        <p-tabView styleClass="modern-tabs">
            <!-- Pestaña Hoy -->
            <p-tabPanel header="Hoy">
                <div class="indicators-section animate-fade-in">
                    <div class="grid">                    
                        <!-- Widgets del Dashboard -->
                        <div class="col-12">
                            <app-dashboard-widgets 
                                [indicadoresEconomicos]="indicadoresEconomicos"
                                [weatherData]="weatherData"
                                [weatherError]="weatherError"
                                [isRefreshing]="isRefreshing"
                                (refreshIndicators)="refreshIndicators()">
                            </app-dashboard-widgets>
                        </div>
                      
                    </div>
                </div>
            </p-tabPanel>

            <!-- Pestaña Configuraciones -->
            <p-tabPanel header="Configuraciones">
                <div class="config-section p-2">
                    <div class="config-card surface-card p-4 border-round shadow-2">
                        <!-- Configuraciones Adicionales -->
                        <div class="config-item animate-fade-in">
                            <div class="flex justify-content-between align-items-center mb-3">
                                <h3 class="text-xl font-medium m-0">Configuraciones Adicionales</h3>                             
                            </div>
                            <div class="flex flex-column gap-3">     
                                 <!-- Brillo -->
                                 <div class="flex align-items-center justify-content-between p-3 border-round surface-100 hover:surface-200 transition-colors transition-duration-150">
                                    <div class="flex align-items-center">
                                        <i class="pi pi-arrows-alt mr-2 text-xl" [ngClass]="{'text-primary': surface >= 1, 'text-yellow-500': surface < 8}"></i>
                                        <div class="flex flex-column">
                                            <span class="font-medium">Surface</span>
                                            <span class="text-sm text-500">Ajustar el nivel de brillo para el fondo los temas</span>
                                        </div>
                                    </div>
                                    <div class="flex align-items-center gap-2">
                                        <button icon="pi pi-minus" 
                                                type="button" 
                                                pButton 
                                                    (click)="decrementSurface()" 
                                                class="p-button-text p-button-rounded w-2rem h-2rem"
                                                [disabled]="surface === surfaces[0]">
                                        </button>
                                        <span class="text-sm font-medium" [ngClass]="{'text-primary': surface >= 1, 'text-yellow-500': surface < 8}">{{surface}}</span>
                                        <button icon="pi pi-plus" 
                                                type="button" 
                                                pButton 
                                                (click)="incrementSurface()" 
                                                class="p-button-text p-button-rounded w-2rem h-2rem"
                                                [disabled]="surface === surfaces[surfaces.length - 1]">
                                        </button>
                                    </div>
                                </div>

                                <!-- Escalar -->
                                <div class="flex align-items-center justify-content-between p-3 border-round surface-100 hover:surface-200 transition-colors transition-duration-150">
                                    <div class="flex align-items-center">
                                        <i class="pi pi-arrows-alt mr-2 text-xl" [ngClass]="{'text-primary': scale >= 14, 'text-yellow-500': scale < 14}"></i>
                                        <div class="flex flex-column">
                                            <span class="font-medium">Escalar</span>
                                            <span class="text-sm text-500">Ajustar el tamaño de la interfaz</span>
                                        </div>
                                    </div>
                                    <div class="flex align-items-center gap-2">
                                        <button icon="pi pi-minus" 
                                                type="button" 
                                                pButton 
                                                (click)="decrementScale()" 
                                                class="p-button-text p-button-rounded w-2rem h-2rem"
                                                [disabled]="scale === scales[0]">
                                        </button>
                                        <span class="text-sm font-medium" [ngClass]="{'text-primary': scale >= 14, 'text-yellow-500': scale < 14}">{{scale}}px</span>
                                        <button icon="pi pi-plus" 
                                                type="button" 
                                                pButton 
                                                (click)="incrementScale()" 
                                                class="p-button-text p-button-rounded w-2rem h-2rem"
                                                [disabled]="scale === scales[scales.length - 1]">
                                        </button>
                                    </div>
                                </div>

                                <!-- Ripple Effect -->
                                <div class="flex align-items-center justify-content-between p-3 border-round surface-100 hover:surface-200 transition-colors transition-duration-150">
                                    <div class="flex align-items-center">
                                        <i class="pi pi-ripple mr-2 text-xl" [ngClass]="{'text-primary': ripple, 'text-yellow-500': !ripple}"></i>
                                        <div class="flex flex-column">
                                            <span class="font-medium">Efecto Ripple</span>
                                            <span class="text-sm text-500">Animación de ondas al hacer clic</span>
                                        </div>
                                    </div>
                                    <div class="flex align-items-center gap-2">
                                        <span class="text-sm font-medium" [ngClass]="{'text-primary': ripple, 'text-yellow-500': !ripple}">
                                            {{ripple ? 'Activado' : 'Desactivado'}}
                                        </span>
                                        <p-inputSwitch [(ngModel)]="ripple" 
                                                     styleClass="modern-switch"
                                                     [style]="{'transform': 'scale(0.8)'}">
                                        </p-inputSwitch>
                                    </div>
                                </div>

                                <!-- Input Style -->
                                <div class="flex align-items-center justify-content-between p-3 border-round surface-100 hover:surface-200 transition-colors transition-duration-150">
                                    <div class="flex align-items-center">
                                        <i class="pi pi-pencil mr-2 text-xl" [ngClass]="{'text-primary': inputStyle === 'outlined', 'text-yellow-500': inputStyle === 'filled'}"></i>
                                        <div class="flex flex-column">
                                            <span class="font-medium">Estilo de Inputs</span>
                                            <span class="text-sm text-500">{{inputStyle === 'outlined' ? 'Cambiar a relleno' : 'Cambiar a contorno'}}</span>
                                        </div>
                                    </div>
                                    <div class="flex align-items-center gap-2">
                                        <span class="text-sm font-medium" [ngClass]="{'text-primary': inputStyle === 'outlined', 'text-yellow-500': inputStyle === 'filled'}">
                                            {{inputStyle === 'outlined' ? 'Contorno' : 'Relleno'}}
                                        </span>
                                        <p-inputSwitch [(ngModel)]="val2" 
                                                     (onChange)="inputStyle = val2 ? 'filled' : 'outlined'"
                                                     styleClass="modern-switch"
                                                     [style]="{'transform': 'scale(0.8)'}">
                                        </p-inputSwitch>
                                    </div>
                                </div>

                                <!-- Menu Mode -->
                                <div *ngIf="!isMobile" class="flex align-items-center justify-content-between p-3 border-round surface-100 hover:surface-200 transition-colors transition-duration-150">
                                    <div class="flex align-items-center">
                                        <i class="pi pi-list mr-2 text-xl"></i>
                                        <div class="flex flex-column">
                                            <span class="font-medium">Menu Modo</span>
                                            <span class="text-sm text-500">{{menuMode === 'static' ? 'Cambiar a dinámico' : 'Cambiar a fijo'}}</span>
                                        </div>
                                    </div>
                                    <div class="flex align-items-center gap-2">
                                        <span class="text-sm font-medium" [ngClass]="{'text-primary': menuMode === 'static', 'text-yellow-500': menuMode === 'overlay'}">
                                            {{menuMode === 'static' ? 'Fijo' : 'Dinámico'}}
                                        </span>
                                        <p-inputSwitch [(ngModel)]="val" 
                                                     (onChange)="menuMode = val ? 'overlay' : 'static'"
                                                     styleClass="modern-switch"
                                                     [style]="{'transform': 'scale(0.8)'}">
                                        </p-inputSwitch>
                                    </div>
                                </div>
                              
                                <!-- Menu Tipo -->
                                <div class="flex align-items-center justify-content-between p-3 border-round surface-100 hover:surface-200 transition-colors transition-duration-150">
                                    <div class="flex align-items-center">
                                        <i class="pi pi-palette mr-2 text-xl"></i>
                                        <div class="flex flex-column">
                                            <span class="font-medium">Menu Tipo</span>
                                            <span class="text-sm text-500">{{menuTipo === 'clasico' ? 'Cambiar a moderno' : 'Cambiar a Clasico'}}</span>
                                        </div>
                                    </div>
                                    <div class="flex align-items-center gap-2">
                                        <span class="text-sm font-medium" [ngClass]="{'text-primary': menuTipo === 'moderno', 'text-yellow-500': menuTipo === 'clasico'}">
                                            {{menuTipo === 'moderno' ? 'Moderno' : 'Clasico'}}
                                        </span>
                                        <p-inputSwitch [(ngModel)]="val3" 
                                                     (onChange)="menuTipo = menuTipo === 'clasico' ? 'moderno' : 'clasico'"
                                                     styleClass="modern-switch"
                                                     [style]="{'transform': 'scale(0.8)'}">
                                        </p-inputSwitch>
                                    </div>
                                </div>
                            </div>
                                <!-- Tema de la Aplicación -->
                                <div class="flex flex-column gap-3 p-3 border-round surface-100">
                                    <div class="flex align-items-center justify-content-between">
                                        <div class="flex align-items-center">
                                            <i class="pi pi-palette mr-2 text-xl" [ngClass]="{'text-primary': !selectedThemeVariant?.isDark, 'text-yellow-500': selectedThemeVariant?.isDark}"></i>
                                            <div class="flex flex-column">
                                                <span class="font-medium">Tema de la Aplicación</span>
                                                <span class="text-sm text-500">Personaliza el aspecto de la aplicación</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Selector de Familia de Temas -->
                                    <div class="flex flex-wrap gap-2">
                                        <p-button *ngFor="let themeFamily of themes"
                                                [label]="themeFamily.name | titlecase"
                                                [outlined]="selectedThemeFamily !== themeFamily.name"
                                                (onClick)="changeThemeFamily(themeFamily.name)"
                                                styleClass="p-button-sm"
                                                [ngClass]="{'p-button-primary': selectedThemeFamily === themeFamily.name}">
                                        </p-button>
                                    </div>

                                    <!-- Selector de Variantes -->
                                    <div class="flex flex-wrap gap-2">
                                        <div *ngFor="let variant of currentThemeVariants"
                                             class="theme-variant-option cursor-pointer p-2 border-round-lg surface-card shadow-1"
                                             [ngClass]="{'border-primary border-2': selectedThemeVariant?.value === variant.value}"
                                             (click)="changeThemeVariant(variant)">
                                            <div class="flex align-items-center gap-2">
                                                <i class="pi" [ngClass]="variant.isDark ? 'pi-moon' : 'pi-sun'"></i>
                                                <span class="text-sm">{{variant.label}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </p-tabPanel>
        </p-tabView>
    </div>    
</p-sidebar> 